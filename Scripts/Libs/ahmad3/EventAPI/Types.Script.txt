#Struct K_EventResponse {
    Text handle;
    Integer last_edition_id;
}

#Struct K_EventEdition {
    Integer id;
    Text name;
    Text subtitle;
    Text start_date;
}

#Struct K_EventEditionContentMapAuthor {
    Text login;
    Text name;
    Text zone_path;
}

#Struct K_NextOpponent {
    Text login;
    Text name;
    Integer time;
}

#Struct K_EventEditionContentOriginalMap {
    Integer mx_id;
    Text name;
    Text map_uid;
}

#Struct K_EventEditionContentMap {
    Integer mx_id;
    K_EventEditionContentMapAuthor main_author;
    Text name;
    Text map_uid;
    Text map_thumbnail;
    Integer bronze_time;
    Integer silver_time;
    Integer gold_time;
    Integer champion_time;
    Integer personal_best;
    K_NextOpponent next_opponent;
    K_EventEditionContentOriginalMap original_map;
}

#Struct K_EventEditionContentCategory {
    Text handle;
    Text name;
    Text banner_img_url;
    K_EventEditionContentMap[] maps;
}

#Struct K_EventEditionInGameParams {
    Text titles_align;
    Text lb_link_align;
    Text authors_align;
    Boolean put_subtitle_on_newline;
    Real titles_pos_x;
    Real titles_pos_y;
    Real lb_link_pos_x;
    Real lb_link_pos_y;
    Real authors_pos_x;
    Real authors_pos_y;
}

#Struct K_EventEditionDetails {
    Integer id;
    Text name;
    Text subtitle;
    Text[] authors;
    Integer start_date;
    Integer end_date;
    K_EventEditionInGameParams ingame_params;
    Text banner_img_url;
    Text banner2_img_url;
    Integer mx_id;
    Boolean expired;
    Text[] original_map_uids;
    K_EventEditionContentCategory[] categories;
}

#Struct K_Event {
    // .handle: Text ; .last_edition_id: Integer
    K_EventResponse Event;
    // for each edition
    //     .id: Integer ; .start_date: Text
    K_EventEdition[Integer] Editions;
    // for each edition details
    //     see K_EventEditionDetails
    K_EventEditionDetails[Integer] EditionsDetails;
}

Text ML_Preproc(Text _Prefix) {
    return """//!
#Struct {{{_Prefix}}}K_EventResponse {
    Text handle;
    Integer last_edition_id;
}

#Struct {{{_Prefix}}}K_EventEdition {
    Integer id;
    Text name;
    Text subtitle;
    Text start_date;
}

#Struct {{{_Prefix}}}K_EventEditionContentMapAuthor {
    Text login;
    Text name;
    Text zone_path;
}

#Struct {{{_Prefix}}}K_NextOpponent {
    Text login;
    Text name;
    Integer time;
}

#Struct {{{_Prefix}}}K_EventEditionContentOriginalMap {
    Integer mx_id;
    Text name;
    Text map_uid;
}

#Struct {{{_Prefix}}}K_EventEditionContentMap {
    Integer mx_id;
    {{{_Prefix}}}K_EventEditionContentMapAuthor main_author;
    Text name;
    Text map_uid;
    Text map_thumbnail;
    Integer bronze_time;
    Integer silver_time;
    Integer gold_time;
    Integer champion_time;
    Integer personal_best;
    {{{_Prefix}}}K_NextOpponent next_opponent;
    {{{_Prefix}}}K_EventEditionContentOriginalMap original_map;
}

#Struct {{{_Prefix}}}K_EventEditionContentCategory {
    Text handle;
    Text name;
    Text banner_img_url;
    {{{_Prefix}}}K_EventEditionContentMap[] maps;
}

#Struct {{{_Prefix}}}K_EventEditionInGameParams {
    Text titles_align;
    Text lb_link_align;
    Text authors_align;
    Boolean put_subtitle_on_newline;
    Real titles_pos_x;
    Real titles_pos_y;
    Real lb_link_pos_x;
    Real lb_link_pos_y;
    Real authors_pos_x;
    Real authors_pos_y;
}

#Struct {{{_Prefix}}}K_EventEditionDetails {
    Integer id;
    Text name;
    Text subtitle;
    Text[] authors;
    Integer start_date;
    Integer end_date;
    {{{_Prefix}}}K_EventEditionInGameParams ingame_params;
    Text banner_img_url;
    Text banner2_img_url;
    Integer mx_id;
    Boolean expired;
    Text[] original_map_uids;
    {{{_Prefix}}}K_EventEditionContentCategory[] categories;
}

#Struct {{{_Prefix}}}K_Event {
    {{{_Prefix}}}K_EventResponse Event;
    {{{_Prefix}}}K_EventEdition[Integer] Editions;
    {{{_Prefix}}}K_EventEditionDetails[Integer] EditionsDetails;
}
""";
}

Text ML_Preproc() {
    return ML_Preproc("");
}
